.historial-page {
    --history-text: #ebf7ff;
    --history-muted: #9dc0d7;
    --history-accent: #5be6ff;
    --history-border: rgba(91, 230, 255, 0.18);
    --history-border-strong: rgba(91, 230, 255, 0.34);
    --history-surface: rgba(6, 22, 38, 0.94);
    --history-surface-soft: rgba(8, 28, 48, 0.68);
    --history-success: #82f0bd;
    --history-warning: #ffd27c;
    --history-danger: #ff8b8b;
    width: 100%;
    padding: 24px 28px 36px;
    color: var(--history-text);
    animation: historyFadeIn 220ms ease-out;
}

.historial-hero,
.historial-panel,
.historial-kpi-card {
    border: 1px solid var(--history-border);
    background:
        radial-gradient(circle at top right, rgba(91, 230, 255, 0.14), transparent 34%),
        linear-gradient(180deg, rgba(8, 27, 46, 0.98), rgba(4, 16, 30, 0.98));
    box-shadow: 0 22px 56px rgba(0, 0, 0, 0.26);
}

.historial-hero {
    display: grid;
    grid-template-columns: minmax(0, 1.2fr) minmax(280px, 0.8fr);
    gap: 22px;
    padding: 30px;
    border-radius: 28px;
    margin-bottom: 22px;
}

.historial-eyebrow,
.historial-panel-kicker {
    margin: 0 0 8px;
    font-size: 12px;
    letter-spacing: 0.18em;
    text-transform: uppercase;
    color: var(--history-accent);
}

.historial-hero-copy h1 {
    margin: 0;
    font-size: clamp(30px, 4vw, 42px);
    line-height: 1.06;
    letter-spacing: -0.04em;
}

.historial-subtitle {
    margin: 14px 0 0;
    font-size: 15px;
    line-height: 1.7;
    color: var(--history-muted);
}

.historial-hero-meta {
    display: flex;
    flex-wrap: wrap;
    gap: 10px;
    margin-top: 18px;
}

.historial-hero-meta span,
.historial-panel-badge,
.historial-toolbar-pill,
.historial-inline-pill {
    display: inline-flex;
    align-items: center;
    min-height: 34px;
    padding: 8px 12px;
    border-radius: 999px;
    border: 1px solid rgba(91, 230, 255, 0.14);
    background: rgba(8, 30, 50, 0.76);
    font-size: 13px;
    color: var(--history-text);
}

.historial-hero-summary {
    display: grid;
    gap: 12px;
    align-self: stretch;
}

.historial-hero-summary article {
    display: grid;
    gap: 6px;
    padding: 18px;
    border-radius: 18px;
    border: 1px solid rgba(91, 230, 255, 0.12);
    background: rgba(7, 26, 44, 0.8);
}

.historial-hero-summary small {
    font-size: 12px;
    letter-spacing: 0.08em;
    text-transform: uppercase;
    color: var(--history-muted);
}

.historial-hero-summary strong {
    font-size: clamp(24px, 3vw, 32px);
    line-height: 1.1;
}

.historial-kpi-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(205px, 1fr));
    gap: 16px;
    margin-bottom: 22px;
}

.historial-kpi-card {
    padding: 22px;
    border-radius: 22px;
}

.historial-kpi-card small {
    display: block;
    font-size: 12px;
    letter-spacing: 0.12em;
    text-transform: uppercase;
    color: var(--history-muted);
}

.historial-kpi-card strong {
    display: block;
    margin-top: 12px;
    font-size: clamp(28px, 3vw, 36px);
    line-height: 1;
}

.historial-kpi-card p {
    margin: 12px 0 0;
    font-size: 14px;
    line-height: 1.6;
    color: var(--history-muted);
}

.historial-kpi-card.danger strong {
    color: #ffd1d1;
}

.historial-overview-grid {
    display: grid;
    grid-template-columns: minmax(0, 1.2fr) minmax(280px, 1fr) minmax(280px, 1fr);
    gap: 20px;
    margin-bottom: 22px;
}

.historial-panel {
    padding: 24px;
    border-radius: 24px;
}

.historial-panel-header {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    flex-wrap: wrap;
    gap: 16px;
    margin-bottom: 16px;
}

.historial-panel-header > div {
    min-width: 0;
}

.historial-section-title {
    margin: 0;
    font-size: 26px;
    line-height: 1.1;
    letter-spacing: -0.03em;
    overflow-wrap: anywhere;
}

.historial-progress-shell {
    margin-bottom: 18px;
}

.historial-progress-bar {
    position: relative;
    width: 100%;
    height: 12px;
    overflow: hidden;
    border-radius: 999px;
    background: rgba(255, 255, 255, 0.08);
}

.historial-progress-bar span {
    display: block;
    height: 100%;
    border-radius: inherit;
    background: linear-gradient(90deg, #48d7ff, #84f1bf);
}

.historial-progress-legend {
    display: flex;
    flex-wrap: wrap;
    justify-content: space-between;
    gap: 8px;
    margin-top: 10px;
    font-size: 13px;
    color: var(--history-muted);
}

.historial-status-grid {
    display: grid;
    grid-template-columns: repeat(3, minmax(0, 1fr));
    gap: 12px;
}

.historial-status-card {
    display: grid;
    gap: 8px;
    padding: 16px;
    border-radius: 18px;
    border: 1px solid rgba(255, 255, 255, 0.08);
    background: var(--history-surface-soft);
}

.historial-status-card strong {
    font-size: 28px;
    line-height: 1;
}

.historial-status-card span {
    font-size: 13px;
    color: var(--history-muted);
}

.historial-status-card.is-good strong {
    color: var(--history-success);
}

.historial-status-card.is-warning strong {
    color: var(--history-warning);
}

.historial-status-card.is-danger strong {
    color: var(--history-danger);
}

.historial-mini-list {
    list-style: none;
    margin: 0;
    padding: 0;
    display: grid;
    gap: 10px;
}

.historial-mini-list li {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    gap: 14px;
    padding: 14px 16px;
    border-radius: 16px;
    border: 1px solid rgba(91, 230, 255, 0.1);
    background: var(--history-surface-soft);
}

.historial-mini-list li > div {
    min-width: 0;
}

.historial-mini-list strong {
    display: block;
    font-size: 15px;
    line-height: 1.35;
    overflow-wrap: anywhere;
}

.historial-mini-list span {
    font-size: 13px;
    line-height: 1.55;
    color: var(--history-muted);
    overflow-wrap: anywhere;
}

.historial-mini-value {
    flex-shrink: 0;
    font-weight: 700;
    color: #d6f6ff;
}

.historial-empty-copy,
.historial-empty {
    color: var(--history-muted);
}

.historial-empty {
    text-align: center;
}

.historial-main-panel {
    margin-bottom: 6px;
}

.historial-toolbar {
    display: flex;
    flex-wrap: wrap;
    gap: 10px;
    margin-bottom: 18px;
}

.tabla-wrapper {
    overflow-x: auto;
    border-radius: 20px;
    border: 1px solid rgba(91, 230, 255, 0.12);
    background: rgba(2, 12, 22, 0.8);
}

.tabla-wrapper-historial {
    overflow-x: auto;
}

.historial-table,
.tabla-detalle-historial {
    width: 100%;
    min-width: 0;
    table-layout: fixed;
    border-collapse: separate;
    border-spacing: 0;
    color: var(--history-text);
}

.historial-table thead th,
.tabla-detalle-historial thead th {
    position: sticky;
    top: 0;
    z-index: 1;
    padding: 16px 14px;
    background: rgba(5, 23, 39, 0.98);
    border-bottom: 1px solid rgba(91, 230, 255, 0.16);
    font-size: 12px;
    text-transform: uppercase;
    letter-spacing: 0.12em;
    text-align: left;
    color: var(--history-accent);
    white-space: normal;
    line-height: 1.35;
    vertical-align: bottom;
}

.historial-table th:first-child,
.historial-table td:first-child,
.tabla-detalle-historial th:first-child,
.tabla-detalle-historial td:first-child {
    padding-left: 18px;
}

.historial-table th:last-child,
.historial-table td:last-child,
.tabla-detalle-historial th:last-child,
.tabla-detalle-historial td:last-child {
    padding-right: 18px;
}

.historial-table tbody td,
.tabla-detalle-historial tbody td {
    padding: 16px 14px;
    border-bottom: 1px solid rgba(91, 230, 255, 0.08);
    font-size: 14px;
    vertical-align: top;
    overflow-wrap: anywhere;
}

.historial-table tbody tr,
.tabla-detalle-historial tbody tr {
    background: rgba(4, 17, 30, 0.68);
    transition: background 160ms ease;
}

.historial-table tbody tr:nth-child(even),
.tabla-detalle-historial tbody tr:nth-child(even) {
    background: rgba(6, 21, 37, 0.84);
}

.historial-table tbody tr:hover,
.tabla-detalle-historial tbody tr:hover {
    background: rgba(14, 42, 68, 0.94);
}

.historial-row-trigger {
    cursor: pointer;
}

.historial-row-trigger:hover,
.historial-row-trigger:focus-within {
    box-shadow: inset 0 0 0 1px rgba(91, 230, 255, 0.2);
}

.historial-cell-title {
    font-weight: 700;
    line-height: 1.4;
    overflow-wrap: anywhere;
}

.historial-meta-stack {
    display: grid;
    gap: 6px;
    min-width: 0;
}

.historial-meta-stack strong {
    font-size: 14px;
    line-height: 1.35;
}

.historial-meta-stack small {
    font-size: 12px;
    line-height: 1.45;
    color: var(--history-muted);
    overflow-wrap: anywhere;
}

.historial-subdata {
    display: block;
    margin-top: 4px;
    font-size: 12px;
    color: var(--history-muted);
    overflow-wrap: anywhere;
}

.historial-inline-pills {
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
    margin-top: 10px;
}

.historial-inline-pill {
    min-height: 30px;
    padding: 6px 10px;
    font-size: 12px;
}

.historial-date-stack {
    display: grid;
    gap: 3px;
}

.historial-date-stack + .historial-date-stack {
    margin-top: 12px;
}

.historial-date-label {
    font-size: 11px;
    text-transform: uppercase;
    letter-spacing: 0.08em;
    color: var(--history-muted);
}

.historial-total {
    color: #c9ffe2;
    font-weight: 700;
}

.historial-total .historial-meta-stack {
    align-items: flex-end;
    text-align: right;
}

.historial-state-note {
    text-transform: uppercase;
    letter-spacing: 0.08em;
}

.historial-personalizaciones {
    line-height: 1.5;
    color: #dceef8;
}

.mono {
    font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
}

.historial-actions-col {
    text-align: right;
}

.historial-actions-cell {
    text-align: right;
}

.historial-main-panel.historial-actions-hidden .historial-col-acciones,
.historial-main-panel.historial-actions-hidden .historial-actions-col,
.historial-main-panel.historial-actions-hidden .historial-actions-cell {
    display: none;
}

.historial-main-panel.historial-actions-hidden .historial-table thead th:nth-child(7),
.historial-main-panel.historial-actions-hidden .historial-table tbody td:nth-child(7) {
    padding-right: 18px;
}

.historial-actions {
    display: flex;
    flex-wrap: wrap;
    justify-content: flex-end;
    gap: 8px;
}

.badge,
.pedido-chip,
.pago-chip {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    width: fit-content;
    max-width: 100%;
    min-height: 34px;
    padding: 6px 12px;
    border-radius: 999px;
    border: 1px solid transparent;
    font-size: 12px;
    font-weight: 700;
    line-height: 1.35;
    text-align: center;
    box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.05);
}

.badge {
    text-transform: capitalize;
}

.badge.registrado {
    background: rgba(66, 180, 255, 0.12);
    border-color: rgba(66, 180, 255, 0.28);
    color: #c7efff;
}

.badge.entregado {
    background: rgba(130, 240, 189, 0.12);
    border-color: rgba(130, 240, 189, 0.28);
    color: #d4ffe8;
}

.badge.anulado {
    background: rgba(255, 139, 139, 0.12);
    border-color: rgba(255, 139, 139, 0.28);
    color: #ffd2d2;
}

.pedido-chip {
    min-height: 30px;
    padding: 5px 10px;
}

.pedido-chip.is-pendiente {
    background: rgba(130, 155, 255, 0.14);
    border-color: rgba(130, 155, 255, 0.28);
    color: #d7e1ff;
}

.pedido-chip.is-proceso {
    background: rgba(255, 210, 124, 0.14);
    border-color: rgba(255, 210, 124, 0.26);
    color: #ffe4b0;
}

.pedido-chip.is-ok {
    background: rgba(130, 240, 189, 0.12);
    border-color: rgba(130, 240, 189, 0.24);
    color: #d4ffe8;
}

.pedido-chip.is-cancelado {
    background: rgba(255, 139, 139, 0.12);
    border-color: rgba(255, 139, 139, 0.24);
    color: #ffd2d2;
}

.pago-chip {
    text-transform: uppercase;
}

.pago-chip.pago-pagado {
    background: rgba(130, 240, 189, 0.12);
    border-color: rgba(130, 240, 189, 0.28);
    color: #d4ffe8;
}

.pago-chip.pago-parcial {
    background: rgba(255, 210, 124, 0.14);
    border-color: rgba(255, 210, 124, 0.26);
    color: #ffe4b0;
}

.pago-chip.pago-pendiente {
    background: rgba(255, 139, 139, 0.12);
    border-color: rgba(255, 139, 139, 0.28);
    color: #ffd2d2;
}

.historial-page .btn,
.historial-modal .btn {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    min-height: 40px;
    padding: 9px 14px;
    border-radius: 12px;
    border: 1px solid transparent;
    background: rgba(9, 31, 52, 0.9);
    color: var(--history-text);
    font-size: 13px;
    font-weight: 700;
    cursor: pointer;
    transition: transform 160ms ease, background 160ms ease, border-color 160ms ease, color 160ms ease;
}

.historial-page .btn:hover,
.historial-modal .btn:hover {
    transform: translateY(-1px);
}

.historial-page .btn.ver {
    border-color: rgba(91, 230, 255, 0.3);
    background: rgba(91, 230, 255, 0.12);
    color: #ccf8ff;
}

.historial-modal .btn.ver {
    border-color: rgba(91, 230, 255, 0.34);
    background: linear-gradient(180deg, rgba(91, 230, 255, 0.24), rgba(91, 230, 255, 0.12));
    color: #e6fbff;
    box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.08), 0 14px 28px rgba(18, 120, 143, 0.18);
}

.historial-page .btn.imprimir {
    border-color: rgba(130, 155, 255, 0.3);
    background: rgba(130, 155, 255, 0.12);
    color: #dbe4ff;
}

.historial-modal .btn.imprimir {
    border-color: rgba(130, 155, 255, 0.34);
    background: linear-gradient(180deg, rgba(130, 155, 255, 0.24), rgba(130, 155, 255, 0.12));
    color: #eef2ff;
    box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.08), 0 14px 28px rgba(54, 76, 165, 0.18);
}

.historial-page .btn.anular,
.historial-modal .btn.cerrar {
    border-color: rgba(255, 139, 139, 0.3);
    background: rgba(255, 139, 139, 0.12);
    color: #ffd0d0;
}

.historial-modal .btn.anular {
    border-color: rgba(255, 139, 139, 0.34);
    background: linear-gradient(180deg, rgba(255, 139, 139, 0.24), rgba(255, 139, 139, 0.12));
    color: #fff0f0;
    box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.08), 0 14px 28px rgba(143, 46, 46, 0.2);
}

.historial-modal[hidden] {
    display: none !important;
}

.historial-modal:not([hidden]) {
    display: grid;
}

.historial-modal {
    position: fixed;
    inset: 0;
    z-index: 1200;
    place-items: center;
}

.historial-modal-backdrop {
    position: absolute;
    inset: 0;
    background: rgba(3, 10, 20, 0.8);
    backdrop-filter: blur(6px);
}

.historial-modal-content {
    position: relative;
    width: min(1160px, 95vw);
    max-height: 90vh;
    overflow: auto;
    padding: 24px;
    border-radius: 24px;
    border: 1px solid var(--history-border-strong);
    background:
        radial-gradient(circle at top right, rgba(91, 230, 255, 0.1), transparent 30%),
        linear-gradient(180deg, rgba(8, 23, 39, 0.98), rgba(4, 15, 28, 0.98));
    box-shadow: 0 28px 60px rgba(0, 0, 0, 0.44);
    color: var(--history-text);
}

.historial-modal-content-compact {
    width: min(760px, 92vw);
}

.historial-modal-header {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    gap: 18px;
    margin-bottom: 18px;
    padding-bottom: 16px;
    border-bottom: 1px solid rgba(91, 230, 255, 0.12);
}

.historial-modal-header > div {
    display: grid;
    gap: 6px;
}

.historial-modal-header h3 {
    margin: 0;
    font-size: 28px;
    line-height: 1.08;
    letter-spacing: -0.03em;
}

.historial-modal-body {
    display: grid;
    gap: 16px;
}

.historial-detail-layout {
    display: grid;
    grid-template-columns: minmax(0, 1.2fr) minmax(280px, 0.9fr) minmax(280px, 0.9fr);
    gap: 14px;
}

.historial-detail-card,
.historial-detalle-items {
    padding: 18px;
    border-radius: 20px;
    border: 1px solid rgba(91, 230, 255, 0.14);
    background: linear-gradient(180deg, rgba(13, 35, 58, 0.9), rgba(7, 24, 42, 0.9));
    box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.03);
}

.historial-detail-card h4,
.historial-detalle-items h4 {
    margin: 0 0 12px;
    font-size: 18px;
    color: #d5f7ff;
    letter-spacing: -0.02em;
}

.historial-detail-card h4::after,
.historial-detalle-items h4::after {
    content: "";
    display: block;
    width: 44px;
    height: 3px;
    margin-top: 8px;
    border-radius: 999px;
    background: linear-gradient(90deg, var(--history-accent), rgba(91, 230, 255, 0.08));
}

.historial-detail-list {
    margin: 0;
    display: grid;
    gap: 8px;
}

.historial-detail-list div {
    display: grid;
    grid-template-columns: 140px minmax(0, 1fr);
    gap: 10px;
    align-items: flex-start;
    padding: 10px 12px;
    border-radius: 14px;
    border: 1px solid rgba(91, 230, 255, 0.08);
    background: rgba(5, 19, 33, 0.32);
}

.historial-detail-list dt {
    color: var(--history-muted);
    font-size: 12px;
    letter-spacing: 0.04em;
    text-transform: uppercase;
}

.historial-detail-list dd {
    margin: 0;
    color: var(--history-text);
    font-size: 14px;
    line-height: 1.5;
    overflow-wrap: anywhere;
}

.historial-resumen-grid {
    display: grid;
    grid-template-columns: repeat(2, minmax(120px, 1fr));
    gap: 10px;
}

.resumen-card {
    padding: 12px;
    border-radius: 14px;
    border: 1px solid rgba(91, 230, 255, 0.14);
    background: linear-gradient(180deg, rgba(18, 39, 64, 0.9), rgba(11, 28, 47, 0.92));
}

.resumen-card small {
    display: block;
    color: var(--history-muted);
    font-size: 11px;
    text-transform: uppercase;
    letter-spacing: 0.08em;
    margin-bottom: 4px;
}

.resumen-card strong {
    color: var(--history-text);
    font-size: 17px;
}

.tabla-detalle-historial td:nth-child(2),
.tabla-detalle-historial td:nth-child(3),
.tabla-detalle-historial td:nth-child(4),
.tabla-detalle-historial td:nth-child(5),
.tabla-detalle-historial td:nth-child(6) {
    font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
}

.historial-feedback {
    margin: 0;
    font-size: 14px;
    line-height: 1.5;
}

.historial-feedback.error {
    color: #ffb0b0;
}

.historial-feedback.success {
    color: #97ffd3;
}

.historial-actions-summary {
    display: grid;
    grid-template-columns: repeat(3, minmax(0, 1fr));
    gap: 12px;
    margin-bottom: 18px;
    padding: 16px;
    border-radius: 18px;
    border: 1px solid rgba(91, 230, 255, 0.12);
    background: rgba(8, 28, 48, 0.58);
}

.historial-actions-summary p {
    margin: 0;
    display: grid;
    gap: 6px;
    min-height: 76px;
    padding: 12px 14px;
    border-radius: 16px;
    border: 1px solid rgba(91, 230, 255, 0.08);
    background: rgba(5, 20, 35, 0.34);
    font-size: 14px;
    line-height: 1.5;
    color: var(--history-muted);
}

.historial-actions-summary strong {
    font-size: 11px;
    letter-spacing: 0.12em;
    text-transform: uppercase;
    color: var(--history-accent);
}

.historial-actions-summary span {
    color: var(--history-text);
    font-size: 15px;
    font-weight: 700;
    overflow-wrap: anywhere;
}

.historial-actions-grid {
    display: grid;
    grid-template-columns: repeat(3, minmax(0, 1fr));
    gap: 12px;
}

.historial-actions-btn {
    width: 100%;
    min-height: 54px;
    border-radius: 16px;
    font-size: 14px;
    letter-spacing: 0.01em;
}

.historial-actions-hint {
    margin: 14px 0 0;
    font-size: 13px;
    line-height: 1.6;
    color: var(--history-muted);
    padding: 12px 14px;
    border-radius: 14px;
    border: 1px dashed rgba(91, 230, 255, 0.14);
    background: rgba(7, 24, 40, 0.44);
}

.historial-col-id {
    width: 7%;
}

.historial-col-operacion {
    width: 20%;
}

.historial-col-cliente {
    width: 17%;
}

.historial-col-cobranza {
    width: 18%;
}

.historial-col-fechas {
    width: 15%;
}

.historial-col-total {
    width: 8%;
}

.historial-col-estado {
    width: 8%;
}

.historial-col-acciones {
    width: 7%;
}

.tabla-detalle-historial th:nth-child(1),
.tabla-detalle-historial td:nth-child(1) {
    width: 21%;
}

.tabla-detalle-historial th:nth-child(2),
.tabla-detalle-historial td:nth-child(2) {
    width: 9%;
}

.tabla-detalle-historial th:nth-child(3),
.tabla-detalle-historial td:nth-child(3),
.tabla-detalle-historial th:nth-child(4),
.tabla-detalle-historial td:nth-child(4),
.tabla-detalle-historial th:nth-child(5),
.tabla-detalle-historial td:nth-child(5),
.tabla-detalle-historial th:nth-child(6),
.tabla-detalle-historial td:nth-child(6) {
    width: 11%;
}

.tabla-detalle-historial th:nth-child(7),
.tabla-detalle-historial td:nth-child(7) {
    width: 26%;
}

@media (max-width: 1280px) {
    .tabla-wrapper-historial {
        overflow: visible;
        border: none;
        background: transparent;
    }

    .historial-table {
        display: block;
    }

    .historial-table colgroup,
    .historial-table thead {
        display: none;
    }

    .historial-table tbody {
        display: grid;
        gap: 14px;
    }

    .historial-table tbody tr {
        display: grid;
        grid-template-columns: repeat(2, minmax(0, 1fr));
        gap: 14px 16px;
        padding: 18px;
        border-radius: 20px;
        border: 1px solid rgba(91, 230, 255, 0.14);
        background:
            linear-gradient(180deg, rgba(9, 29, 48, 0.92), rgba(5, 19, 33, 0.94));
        box-shadow: 0 16px 34px rgba(0, 0, 0, 0.2);
    }

    .historial-table tbody td {
        display: grid;
        gap: 7px;
        padding: 0;
        border: none;
    }

    .historial-table tbody td::before {
        content: attr(data-label);
        font-size: 11px;
        letter-spacing: 0.12em;
        text-transform: uppercase;
        color: var(--history-accent);
    }

    .historial-table tbody td.historial-cell-id,
    .historial-table tbody td[data-label="Operación"],
    .historial-table tbody td[data-label="Cliente"],
    .historial-table tbody td[data-label="Cobranza"],
    .historial-table tbody td[data-label="Acciones"] {
        grid-column: 1 / -1;
    }

    .historial-table tbody td.historial-empty {
        grid-column: 1 / -1;
        padding: 14px 0;
    }

    .historial-actions-col,
    .historial-actions-cell,
    .historial-total .historial-meta-stack {
        text-align: left;
    }

    .historial-actions {
        justify-content: flex-start;
    }
}

@media (max-width: 1180px) {
    .historial-detalle-items .tabla-wrapper {
        overflow: visible;
        border: none;
        background: transparent;
    }

    .tabla-detalle-historial {
        display: block;
    }

    .tabla-detalle-historial thead {
        display: none;
    }

    .tabla-detalle-historial tbody {
        display: grid;
        gap: 12px;
    }

    .tabla-detalle-historial tbody tr {
        display: grid;
        gap: 10px;
        padding: 16px;
        border-radius: 18px;
        border: 1px solid rgba(91, 230, 255, 0.12);
        background: rgba(7, 24, 40, 0.9);
    }

    .tabla-detalle-historial tbody td {
        display: grid;
        gap: 6px;
        padding: 0;
        border: none;
    }

    .tabla-detalle-historial tbody td::before {
        content: attr(data-label);
        font-size: 11px;
        letter-spacing: 0.12em;
        text-transform: uppercase;
        color: var(--history-accent);
    }

    .tabla-detalle-historial tbody td.historial-empty {
        padding: 10px 0;
    }
}

@keyframes historyFadeIn {
    from {
        opacity: 0;
        transform: translateY(10px);
    }

    to {
        opacity: 1;
        transform: translateY(0);
    }
}

@media (max-width: 1180px) {
    .historial-hero,
    .historial-overview-grid,
    .historial-detail-layout,
    .historial-actions-summary {
        grid-template-columns: 1fr;
    }
}

@media (max-width: 900px) {
    .historial-page {
        padding: 20px 18px 28px;
    }

    .historial-resumen-grid {
        grid-template-columns: 1fr 1fr;
    }
}

@media (max-width: 640px) {
    .historial-page {
        padding: 16px 14px 24px;
    }

    .historial-hero,
    .historial-panel,
    .historial-kpi-card,
    .historial-modal-content {
        border-radius: 20px;
    }

    .historial-hero,
    .historial-panel,
    .historial-kpi-card,
    .historial-modal-content,
    .historial-detail-card,
    .historial-detalle-items {
        padding: 18px;
    }

    .historial-modal-header,
    .historial-panel-header,
    .historial-mini-list li {
        flex-direction: column;
        align-items: flex-start;
    }

    .historial-status-grid,
    .historial-resumen-grid,
    .historial-actions-grid {
        grid-template-columns: 1fr;
    }

    .historial-table tbody tr {
        grid-template-columns: 1fr;
    }

    .historial-table tbody td.historial-cell-id,
    .historial-table tbody td[data-label="Operación"],
    .historial-table tbody td[data-label="Cliente"],
    .historial-table tbody td[data-label="Cobranza"],
    .historial-table tbody td[data-label="Acciones"] {
        grid-column: auto;
    }

    .historial-actions-summary p {
        min-height: auto;
    }

    .historial-detail-list div {
        grid-template-columns: 1fr;
        gap: 3px;
    }

    .historial-actions {
        min-width: 184px;
        justify-content: flex-start;
    }

    .historial-table thead th,
    .historial-table tbody td,
    .tabla-detalle-historial thead th,
    .tabla-detalle-historial tbody td {
        padding: 13px 12px;
    }
}
